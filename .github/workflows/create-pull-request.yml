name: Create PR based on branch
on:
  workflow_dispatch:
  push:
    branches:
      - 'feature/**'
permissions:
  contents: write
jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git commit -m "Empty commit" --allow-empty
          git push

  createPullRequest:
    runs-on: ubuntu-latest
    needs: commit
    steps:
      - uses: actions/checkout@v3
      - name: pull-request
        uses: repo-sync/pull-request@v2
        with:
          destination_branch: main
          pr_title: Pulling ${{ github.ref }} into main
          pr_body: |
            :crown: *An automated PR*
            _Created by [repo-sync/pull-request](https://github.com/repo-sync/pull-request)_
          pr_reviewer: "felipebelinassi"
          pr_label: "feature,automated"
          pr_draft: true                                    # Creates pull request as draft
          pr_allow_empty: true                              # Creates pull request even if there are no changes
          github_token: ${{ github.token }}
