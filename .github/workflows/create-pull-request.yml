name: Create PR based on branch
on:
  workflow_dispatch:
  push:
    branches:
      - 'feature/**'
permissions:
  contents: write
jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git commit -m "Empty commit" --allow-empty
          git push

  createPullRequest:
    runs-on: ubuntu-latest
    needs: commit
    steps:
      - name: Create Pull Request
        id: cpr
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.PAT }}
          commit-message: PR commit
          committer: GitHub <noreply@github.com>
          author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
          branch: ${{ github.ref }}
          base: main
          delete-branch: true
          title: 'Test PR'
          body: |
            Test PR creation
            - wow, with *custom* description
            - Auto-generated by [create-pull-request][1]

            [1]: https://github.com/peter-evans/create-pull-request
          labels: |
            feature
            automated
          assignees: felipebelinassi
          # reviewers: peter-evans
          team-reviewers: |
            devs
          draft: false
    
  # On-Branch-Created:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
  #     - name: Check out repository code
  #       uses: actions/checkout@v3
  #     - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
  #     - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
  #     - run: echo "ğŸ This job's status is ${{ job.status }}."

  # - name: Create Pull Request
  #   uses: peter-evans/create-pull-request@v3.10.1
  #   with:
  #     token: ${{ secrets.GH_TOKEN }}
  #     commit-message: Auto Pull Request
  #     title: Your desired title
  #     body: Auto-created Pull Request
  #     branch: ${{ github.ref }} # The branch where you commit
  #     base: develop # Don't forget to specify the right base branch here

  